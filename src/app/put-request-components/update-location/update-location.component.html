<div class="update-location-form">
  <form [formGroup]="locationForm" (ngSubmit)="updateLocation()">
    <div
      class="form-floating mb-3"
      *ngFor="
        let field of [
          'name',
          'address',
          'city',
          'state',
          'country',
          'postalCode'
        ]
      "
    >
      <input
        *ngIf="field !== 'address'; else addressField"
        type="text"
        class="form-control"
        [formControlName]="field"
        [id]="field"
        [placeholder]="field"
      />
      <ng-template #addressField>
        <textarea
          class="form-control"
          formControlName="address"
          id="address"
          placeholder="Address"
        ></textarea>
      </ng-template>
      <label [for]="field">{{ field | titlecase }}</label>

      <div
        class="text-danger small"
        *ngIf="serverErrors[field.charAt(0).toUpperCase() + field.slice(1)]"
      >
        <div
          *ngFor="
            let msg of serverErrors[
              field.charAt(0).toUpperCase() + field.slice(1)
            ]
          "
        >
          {{ msg }}
        </div>
      </div>
    </div>

    <div class="form-floating mb-3">
      <textarea
        class="form-control"
        formControlName="description"
        id="description"
        placeholder="Description"
        style="min-height: 100px"
      ></textarea>
      <label for="description">Description</label>
      <div class="text-danger small" *ngIf="serverErrors['Description']">
        <div *ngFor="let msg of serverErrors['Description']">{{ msg }}</div>
      </div>
    </div>

    <div class="mb-3">
      <label for="imageInput" class="form-label">Upload Image</label>
      <input
        class="form-control form-control-lg"
        type="file"
        id="imageInput"
        (change)="onFileSelected($event)"
        accept="image/*"
      />
      <div class="text-danger small" *ngIf="serverErrors['Image']">
        <div *ngFor="let msg of serverErrors['Image']">{{ msg }}</div>
      </div>
    </div>

    <div
      *ngIf="imagePreview"
      class="preview-container d-flex flex-wrap gap-3 my-3"
    >
      <div class="position-relative border rounded p-1">
        <button
          type="button"
          class="btn-close position-absolute top-0 end-0 m-1"
          (click)="removeImage()"
        ></button>
        <img
          [src]="imagePreview"
          alt="Preview"
          class="img-thumbnail"
          style="width: 120px; height: 120px; object-fit: cover"
        />
      </div>
    </div>

    <div class="form-floating mb-3">
      <select class="form-select" formControlName="isIndoor" id="isIndoor">
        <option [value]="true">True</option>
        <option [value]="false">False</option>
      </select>
      <label for="isIndoor">Is Indoor</label>
    </div>

    <div class="d-flex justify-content-end">
      <button type="submit" class="btn btn-warning mt-3">
        Update Location
      </button>
    </div>
  </form>
</div>
