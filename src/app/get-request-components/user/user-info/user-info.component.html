<div class="user-page">
  <section class="top">
    <div
      style="display: grid; grid-template-rows: 1fr auto; gap: 20px"
      class="imageAndButtons"
    >
      <img
        [src]="imagePreview || user.profilePicture"
        alt="Profile Picture"
        class="img-thumbnail"
        width="150"
      />

      <div *ngIf="imagePreview" class="mt-2 d-flex justify-content-center">
        <button class="btn btn-success me-2" (click)="changeProfilePicture()">
          Save
        </button>
        <button class="btn btn-danger" (click)="removeImage()">Cancel</button>
      </div>
    </div>

    <div class="main-information">
      <div class="card">
        <div class="card-body">
          <div class="card-header-custom">
            <h1 class="card-title">{{ user.name }}</h1>

            <div class="dropdown mt-1">
              <button
                class="btn btn-secondary"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <i class="bi bi-three-dots-vertical"></i>
              </button>
              <ul class="dropdown-menu">
                <li>
                  <button class="dropdown-item" (click)="fileInput.click()">
                    Update Profile Picture
                  </button>
                  <input
                    type="file"
                    #fileInput
                    accept="image/*"
                    style="display: none"
                    (change)="onFileSelected($event)"
                  />
                </li>
                <li>
                  <a [routerLink]="['update-user']" class="dropdown-item"
                    >Update User</a
                  >
                </li>
                @if(getUserRole(user.role) === "ORGANIZER"){
                <li>
                  <button (click)="removeAsOrganizer()" class="dropdown-item">
                    Remove User As Organizer
                  </button>
                </li>
                }
                <li>
                  <button (click)="deleteUser()" class="dropdown-item">
                    Delete User
                  </button>
                </li>
              </ul>
            </div>
          </div>

          <p class="card-text">Email: {{ user.email }}</p>
          <p class="card-text">Phone Number: {{ user.phoneNumber }}</p>
          <p class="card-text">
            User Role: {{ getUserRole(user.role).toLowerCase() }}
          </p>
          <p class="card-text">
            User Type: {{ getUserType(user.userType).toLowerCase() }}
          </p>
          <p class="card-text">Balance: {{ user.balance }}</p>
          @if (user.isLoggedIn) {
          <p class="card-text">Online Status: Online</p>
          } @else {
          <p class="card-text">Online Status: Offline</p>
          }
        </div>
      </div>
    </div>
  </section>
  <section class="bottom">
    <h1>
      need to add collapse for update logic, also should add button for account
      deletion. Also should check if logged in user is viewing the profile, if
      so then balance should be displayed, otherwise balance should be hidden.
    </h1>
  </section>
</div>
